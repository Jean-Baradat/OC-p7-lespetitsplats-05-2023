

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> data/DataPreparation.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Namespaces</h3><ul><li><a href="AllTemplate.html">AllTemplate</a></li><li><a href="DataPreparation.html">DataPreparation</a></li><li><a href="Utils.html">Utils</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ASFevent">ASFevent</a></li><li><a href="global.html#ASFswitchToggle">ASFswitchToggle</a></li><li><a href="global.html#clickOnASFitem">clickOnASFitem</a></li><li><a href="global.html#getData">getData</a></li><li><a href="global.html#mainSearchInput">mainSearchInput</a></li><li><a href="global.html#updateASresultsInDOM">updateASresultsInDOM</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>data/DataPreparation.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import getData from "../api/Api.js";

/**
 * Contains all the methods for preparing the data.
 * 
 * @namespace DataPreparation
 * @version 1.0.0
 * @since 1.0.0
 * 
 * @created 2023-05
 * @updated 2023-08-26
 * 
 * @author Jean Baradat
 * @modifiedby Jean Baradat
 * 
 * @property {method} listsOfAdvancedFilter - Filters the lists of ingredients, machines, and tools based on the main search value, the advanced filter search fields, and the selected advanced search filters.
 * @property {method} handleListOfRecipes - Filters the list of recipes based on the main search value and the selected advanced search filters.
 * 
 * @property {method} filterRecipeByIngredients - Returns true if the list of ingredients selected by the advanced search is/are in the recipe, otherwise false.
 * @property {method} filterRecipeByMachines - Returns true if the list of machines selected by the advanced search is/are in the recipe, otherwise false.
 * @property {method} filterRecipeByTools - Returns true if the list of tools selected by the advanced search is/are in the recipe, otherwise false.
 * 
 * @property {method} searchRecipeName - Returns true if the recipe name includes the search value.
 * @property {method} searchRecipeIngredients - Returns true if the recipe contains an ingredient that includes the search value.
 * @property {method} searchRecipeDescription - Returns true if the recipe description includes the search value.
 */
const DataPreparation = {

    recipes: await getData(),
    listOfIngredients: [],
    listOfMachines: [],
    listOfTools: [],
    listOfRecipes: [],

    /**
     * This function filters the lists of ingredients, machines, and tools based on the 
     * main search value, the advanced filter search fields, and the selected advanced search filters
     * 
     * @memberof DataPreparation
     * @method listsOfAdvancedFilter
     * 
     * @param {boolean} isInit - Whether this is the initial filter or not.
     * @param {Object} ASFValues - An object containing the values for the advanced filter fields.
     * @param {Object} listOfAdvancedFilterSelected - An object containing the selected advanced search filters.
     * @returns {Object} An object containing the filtered lists of ingredients, machines, and tools.
     */
    listsOfAdvancedFilter(isInit, ASFValues, listOfAdvancedFilterSelected) {
        this.listOfIngredients = [];
        this.listOfMachines = [];
        this.listOfTools = [];

        if (isInit) {
            this.listOfRecipes = this.recipes;
        }

        this.listOfRecipes.forEach(recipe => {

            recipe.ingredients.map(ingredient => {
                let ingredientName = ingredient.ingredient.toLowerCase();

                if (!this.listOfIngredients.includes(ingredientName) &amp;&amp;
                    ingredientName.includes(ASFValues.ingredient) &amp;&amp;
                    !listOfAdvancedFilterSelected.listOfIngredients.includes(ingredientName)) {
                    this.listOfIngredients.push(ingredientName);
                }
            });

            // ---------------------------------------------------------------
            let applianceName = recipe.appliance.toLowerCase();
            if (!this.listOfMachines.includes(applianceName) &amp;&amp;
                applianceName.includes(ASFValues.machine) &amp;&amp;
                !listOfAdvancedFilterSelected.listOfMachines.includes(applianceName)) {
                this.listOfMachines.push(applianceName);
            }

            // ---------------------------------------------------------------
            recipe.ustensils.map(tool => {
                let toolName = tool.toLowerCase();

                if (!this.listOfTools.includes(toolName) &amp;&amp;
                    toolName.includes(ASFValues.tool) &amp;&amp;
                    !listOfAdvancedFilterSelected.listOfTools.includes(toolName)) {
                    this.listOfTools.push(toolName);
                }
            });
        });

        return {
            listOfIngredients: this.listOfIngredients,
            listOfMachines: this.listOfMachines,
            listOfTools: this.listOfTools
        };
    },

    /**
     * This function filters the list of recipes based on the main search value and the selected advanced search filters.
     * 
     * @memberof DataPreparation
     * @method handleListOfRecipes
     * 
     * @param {string} searchValue - The search value of the search bar.
     * @param {Object} listOfAdvancedFilterSelected - An object containing the selected advanced search filters.
     * @returns {Object} An object containing the filtered list of recipes.
     */
    handleListOfRecipes(searchValue, listOfAdvancedFilterSelected) {
        this.listOfRecipes = [];

        const recipes = this.recipes.filter((recipe) => {
            return this.searchRecipeName(recipe, searchValue) ||
                this.searchRecipeIngredients(recipe, searchValue) ||
                this.searchRecipeDescription(recipe, searchValue);
        });

        for (const recipe of recipes) {
            if (this.filterRecipeByIngredients(recipe, listOfAdvancedFilterSelected.listOfIngredients) &amp;&amp;
                this.filterRecipeByMachines(recipe, listOfAdvancedFilterSelected.listOfMachines) &amp;&amp;
                this.filterRecipeByTools(recipe, listOfAdvancedFilterSelected.listOfTools)) {

                this.listOfRecipes.push(recipe);
            }
        }

        return this.listOfRecipes;
    },

    /**
     * Returns true if the list of ingredients selected by the advanced search is/are in the recipe, otherwise false.
     * 
     * @memberof DataPreparation
     * @method filterRecipeByIngredients
     * 
     * @param {Object} recipe - The recipe.
     * @param {Array} ingredients - List of ingredients selected by the advanced search.
     * @returns {boolean}
     */
    filterRecipeByIngredients(recipe, ingredients) {
        if (ingredients.length !== 0) {
            return ingredients.every(ingredient => {
                return recipe.ingredients.some(ingredientData => {
                    return ingredientData.ingredient.toLowerCase() === ingredient;
                });
            });
        } else {
            return true;
        }
    },

    /**
     * Returns true if the list of machines selected by the advanced search is/are in the recipe, otherwise false.
     * 
     * @memberof DataPreparation
     * @method filterRecipeByMachines
     * 
     * @param {Object} recipe - The recipe.
     * @param {Array} machines - List of machines selected by the advanced search.
     * @returns {boolean}
     */
    filterRecipeByMachines(recipe, machines) {
        if (machines.length !== 0) {
            return machines.every(machine => {
                return recipe.appliance.toLowerCase() === machine;
            });
        } else {
            return true;
        }
    },

    /**
     * Returns true if the list of tools selected by the advanced search is/are in the recipe, otherwise false.
     * 
     * @memberof DataPreparation
     * @method filterRecipeByTools
     * 
     * @param {Object} recipe - The recipe.
     * @param {Array} tools - List of tools selected by the advanced search.
     * @returns {boolean}
     */
    filterRecipeByTools(recipe, tools) {
        if (tools.length !== 0) {
            return tools.every(tool => {
                return recipe.ustensils.some(ustensil => {
                    return ustensil.toLowerCase() === tool;
                });
            });
        } else {
            return true;
        }
    },

    /**
     * Returns true if the recipe name includes the search value.
     * 
     * @memberof DataPreparation
     * @method searchRecipeName
     * 
     * @param {Object} recipe - The recipe object to search.
     * @param {string} searchValue - The value to search for in the recipe name.
     * @returns {boolean} - True if the recipe name includes the search value, false otherwise.
     */
    searchRecipeName(recipe, searchValue) {
        return recipe.name.toLowerCase().includes(searchValue);
    },

    /**
     * Returns true if the recipe contains an ingredient that includes the search value.
     * 
     * @memberof DataPreparation
     * @method searchRecipeIngredients
     * 
     * @param {Object} recipe - The recipe object to search.
     * @param {string} searchValue - The value to search for in the recipe ingredients.
     * @returns {boolean} - True if the recipe contains an ingredient that includes the search value, false otherwise.
     */
    searchRecipeIngredients(recipe, searchValue) {
        for (const ingredient of recipe.ingredients) {
            if (ingredient.ingredient.toLowerCase().includes(searchValue)) {
                return true;
            }
        }
        return false;
    },

    /**
     * Returns true if the recipe description includes the search value.
     * 
     * @memberof DataPreparation
     * @method searchRecipeDescription
     * 
     * @param {Object} recipe - The recipe object to search.
     * @param {string} searchValue - The value to search for in the recipe description.
     * @returns {boolean} - True if the recipe description includes the search value, false otherwise.
     */
    searchRecipeDescription(recipe, searchValue) {
        return recipe.description.toLowerCase().includes(searchValue);
    },
}

export default DataPreparation;</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>


</body>
</html>
